<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PoofMicro - ESP32 Builder</title>
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    <h1>PoofMicro</h1>
                </div>
                <div class="header-actions">
                    <button class="icon-btn" id="settingsBtn" title="Settings">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364l-4.243-4.243M9.879 9.879L5.636 5.636m12.728 12.728l-4.243-4.243m-4.242 0L5.636 20.364"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="grid-container">
                <!-- Project Card -->
                <div class="card project-card">
                    <div class="card-header">
                        <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <path d="M3 9h18M9 21V9"/>
                        </svg>
                        <h2>New Project</h2>
                    </div>
                    <div class="card-body">
                        <form id="projectForm" class="form">
                            <div class="form-group">
                                <label for="projectName">Project Name</label>
                                <input type="text" id="projectName" name="projectName" placeholder="My ESP32 Project" required>
                            </div>

                            <div class="form-group">
                                <label for="boardType">ESP32 Board</label>
                                <select id="boardType" name="boardType">
                                    <option value="esp32">ESP32 (Original)</option>
                                    <option value="esp32s2">ESP32-S2</option>
                                    <option value="esp32s3">ESP32-S3</option>
                                    <option value="esp32c3">ESP32-C3</option>
                                    <option value="esp32c6">ESP32-C6</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="description">Description</label>
                                <textarea id="description" name="description" rows="3" placeholder="Describe what you want to build..." required></textarea>
                            </div>

                            <div class="form-group">
                                <label>Features</label>
                                <div class="chip-group">
                                    <label class="chip">
                                        <input type="checkbox" name="features" value="wifi">
                                        <span>Wi-Fi</span>
                                    </label>
                                    <label class="chip">
                                        <input type="checkbox" name="features" value="ap">
                                        <span>Access Point</span>
                                    </label>
                                    <label class="chip">
                                        <input type="checkbox" name="features" value="webserver">
                                        <span>Web Server</span>
                                    </label>
                                    <label class="chip">
                                        <input type="checkbox" name="features" value="mqtt">
                                        <span>MQTT</span>
                                    </label>
                                    <label class="chip">
                                        <input type="checkbox" name="features" value="bluetooth">
                                        <span>Bluetooth</span>
                                    </label>
                                    <label class="chip">
                                        <input type="checkbox" name="features" value="sensors">
                                        <span>Sensors</span>
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <polygon points="5 3 19 12 5 21 5 3"/>
                                </svg>
                                Generate Project
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Search Card -->
                <div class="card search-card">
                    <div class="card-header">
                        <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <h2>Search Libraries</h2>
                    </div>
                    <div class="card-body">
                        <div class="search-box">
                            <input type="text" id="librarySearch" placeholder="Search for libraries (e.g., DHT, OLED, Servo)...">
                            <button id="librarySearchBtn" class="icon-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="M21 21l-4.35-4.35"/>
                                </svg>
                            </button>
                        </div>
                        <div id="libraryResults" class="results-list"></div>
                    </div>
                </div>

                <!-- Materials Card -->
                <div class="card materials-card">
                    <div class="card-header">
                        <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="2" y="7" width="20" height="14" rx="2"/>
                            <path d="M12 22V7M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/>
                            <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/>
                        </svg>
                        <h2>Hardware Materials</h2>
                    </div>
                    <div class="card-body">
                        <div class="search-box">
                            <input type="text" id="materialSearch" placeholder="Search for components (e.g., temperature sensor, relay)...">
                            <button id="materialSearchBtn" class="icon-btn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="M21 21l-4.35-4.35"/>
                                </svg>
                            </button>
                        </div>
                        <div id="materialResults" class="results-list"></div>
                    </div>
                </div>

                <!-- Context Card -->
                <div class="card context-card">
                    <div class="card-header">
                        <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                        </svg>
                        <h2>Board Context</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label for="boardContext">Additional Context</label>
                            <textarea id="boardContext" rows="6" placeholder="Describe your specific board, pin connections, or any custom requirements..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="customCode">Custom Code Snippet</label>
                            <textarea id="customCode" rows="4" placeholder="Paste any existing code to include..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Projects Card -->
                <div class="card projects-card">
                    <div class="card-header">
                        <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                        </svg>
                        <h2>Projects</h2>
                    </div>
                    <div class="card-body">
                        <div id="projectsList" class="projects-list">
                            <div class="empty-state">No projects yet. Create your first project above.</div>
                        </div>
                    </div>
                </div>

                <!-- Build Output Card -->
                <div class="card output-card">
                    <div class="card-header">
                        <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <polyline points="4 17 10 11 4 5"/>
                            <line x1="12" y1="19" x2="20" y2="19"/>
                        </svg>
                        <h2>Build Output</h2>
                    </div>
                    <div class="card-body">
                        <div id="buildOutput" class="terminal-output">
                            <div class="terminal-line">PoofMicro ESP32 Builder ready...</div>
                            <div class="terminal-line">Waiting for project generation...</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="icon-btn" id="closeSettings">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="apiKey">GLM 4.7 API Key</label>
                        <input type="password" id="apiKey" placeholder="Enter your GLM API key">
                    </div>
                    <button id="saveSettings" class="btn btn-primary">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>
